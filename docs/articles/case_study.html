<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="restoptr">
<title>Case study: using historical data to set ecological restoration targets • restoptr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Case study: using historical data to set ecological restoration targets">
<meta property="og:description" content="restoptr">
<meta property="og:image" content="https://dimitri-justeau.github.io/restoptr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">restoptr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/restoptr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/case_study.html">Case study: using historical data to set ecological restoration targets</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dimitri-justeau/restoptr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="case_study_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Case study: using historical data to set ecological restoration targets</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dimitri-justeau/restoptr/blob/HEAD/vignettes/case_study.Rmd" class="external-link"><code>vignettes/case_study.Rmd</code></a></small>
      <div class="d-none name"><code>case_study.Rmd</code></div>
    </div>

    
    
<p>Historical landscape data is useful to assess habitat loss, increase in habitat fragmentation, or decrease in ecological connectivity. Using <em>restoptr</em>, it is possible to take advantage of such historical data to define ecological restoration targets based on the past state of a landscape. In New Caledonia, many vegetation areas are threatened by mining activity, which is the pillar of the archipelago’s economy. In this case study, we specifically focused on a mining area located in the north of the main island of New Caledonia, the Mount Kaala. In this area, aerial images from 1976 and 2021 are freely distributed by the Government of New Caledonia. Forest areas in 1976 were digitized manually, and forest areas in 2021 were digitized using an automated method based on the historical analysis of temporal series from Landsat data <span class="citation">(Vancutsem <em>et al.</em> 2021)</span>, both at a resolution of 30 m x 30 m. This data is included as an example dataset in the <em>restoptr</em> package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load packages</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dimitri-justeau.github.io/restoptr/">restoptr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/" class="external-link">terra</a></span><span class="op">)</span>

<span class="co"># load habitat data</span>
<span class="va">forest_1976</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>
  <span class="st">"extdata"</span>, <span class="st">"case_study"</span>, <span class="st">"forest_1976.tif"</span>,
  package <span class="op">=</span> <span class="st">"restoptr"</span>
<span class="op">)</span><span class="op">)</span>
<span class="va">forest_2021</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>
  <span class="st">"extdata"</span>, <span class="st">"case_study"</span>, <span class="st">"forest_2021.tif"</span>,
  package <span class="op">=</span> <span class="st">"restoptr"</span>
<span class="op">)</span><span class="op">)</span>

<span class="co"># visualize habitat data</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">forest_1976</span>, <span class="va">forest_2021</span><span class="op">)</span><span class="op">)</span>,
     main<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Forest 1976"</span>, <span class="st">"Forest 2021"</span><span class="op">)</span>,
     nc<span class="op">=</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="case_study_files/figure-html/unnamed-chunk-3-1.png" width="700" style="display: block; margin: auto;"></p>
<p>In this case study, we will use an aggregation factor of 3, which corresponds to planning units of 90 m x 90 m according to our input maps. This aggregation factor will ensure a good trade-off between spatial resolution and computational tractability. The habitat threshold parameter, set to 0.75 in this case study, indicates that a planning unit is considered as habitat if it contains at least 75% of habitat. To define restoration targets based on the evolution of the landscape between 1976 and 2021, we need to produce the aggregated rasters and evaluate their landscape metrics. To do so, we use <em>restoptr</em>’s preprocessing toolchain.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># produce aggregated data</span>
<span class="va">forest_1976_aggr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/preprocess_input.html">preprocess_input</a></span><span class="op">(</span><span class="va">forest_1976</span>,
                                     aggregation_factor <span class="op">=</span> <span class="fl">3</span>,
                                     habitat_threshold <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span><span class="op">$</span><span class="va">existing_habitat</span>
<span class="va">forest_2021_aggr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/preprocess_input.html">preprocess_input</a></span><span class="op">(</span><span class="va">forest_2021</span>,
                                     aggregation_factor <span class="op">=</span> <span class="fl">3</span>,
                                     habitat_threshold <span class="op">=</span> <span class="fl">0.75</span><span class="op">)</span><span class="op">$</span><span class="va">existing_habitat</span>

<span class="co"># visualize aggregated data</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">forest_1976_aggr</span>, <span class="va">forest_2021_aggr</span><span class="op">)</span><span class="op">)</span>,
     main<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Forest 1976 (aggr.)"</span>, <span class="st">"Forest 2021 (aggr."</span><span class="op">)</span>,
     nc<span class="op">=</span><span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="case_study_files/figure-html/unnamed-chunk-4-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Now, we use the <strong>landscapemetrics</strong> package to assess the habitat loss and the increase in fragmentation between 1976 and 2021. The habitat loss is measured using the input 30 m x 30 m raster, because <em>restoptr</em> preprocessing toolchain preserves the habitat area. However, the fragmentation is measured at the aggregated level with the effective mesh size index <span class="citation">(Jaeger 2000)</span>, which value is impacted by the aggregation factor and the habitat threshold.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatialecology.github.io/landscapemetrics/" class="external-link">landscapemetrics</a></span><span class="op">)</span>

<span class="va">forest_area_1976</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatialecology.github.io/landscapemetrics/reference/lsm_c_ca.html" class="external-link">lsm_c_ca</a></span><span class="op">(</span><span class="va">forest_1976</span><span class="op">)</span>
<span class="va">forest_area_1976</span> <span class="op">&lt;-</span> <span class="va">forest_area_1976</span><span class="op">[</span><span class="va">forest_area_1976</span><span class="op">$</span><span class="va">class</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span><span class="op">$</span><span class="va">value</span>
<span class="va">forest_area_2021</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatialecology.github.io/landscapemetrics/reference/lsm_c_ca.html" class="external-link">lsm_c_ca</a></span><span class="op">(</span><span class="va">forest_2021</span><span class="op">)</span>
<span class="va">forest_area_2021</span> <span class="op">&lt;-</span> <span class="va">forest_area_2021</span><span class="op">[</span><span class="va">forest_area_2021</span><span class="op">$</span><span class="va">class</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span><span class="op">$</span><span class="va">value</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Evolution of forest area between 1976 and 2021 : "</span>,
    <span class="va">forest_area_2021</span> <span class="op">-</span> <span class="va">forest_area_1976</span>, <span class="st">"ha"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Evolution of forest area between 1976 and 2021 :  -165.03 ha</span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mesh_1976</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatialecology.github.io/landscapemetrics/reference/lsm_c_mesh.html" class="external-link">lsm_c_mesh</a></span><span class="op">(</span><span class="va">forest_1976_aggr</span>, directions <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="va">mesh_1976</span> <span class="op">&lt;-</span> <span class="va">mesh_1976</span><span class="op">[</span><span class="va">mesh_1976</span><span class="op">$</span><span class="va">class</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span><span class="op">$</span><span class="va">value</span>
<span class="va">mesh_2021</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatialecology.github.io/landscapemetrics/reference/lsm_c_mesh.html" class="external-link">lsm_c_mesh</a></span><span class="op">(</span><span class="va">forest_2021_aggr</span>, directions <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="va">mesh_2021</span> <span class="op">&lt;-</span> <span class="va">mesh_2021</span><span class="op">[</span><span class="va">mesh_2021</span><span class="op">$</span><span class="va">class</span> <span class="op">==</span> <span class="fl">1</span>, <span class="op">]</span><span class="op">$</span><span class="va">value</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Evolution of MESH betwee 1976 and 2021 : "</span>, <span class="va">mesh_2021</span> <span class="op">-</span> <span class="va">mesh_1976</span>, <span class="st">"ha"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Evolution of MESH betwee 1976 and 2021 :  -30.98568 ha</span></code></pre>
<p>As we can see, the forest area decreased and the fragmentation increased between 1976 and 2021 (the higher MESH is, the lower the fragmentation is). Our objective is thus to identify restoration plans that (i) is located in accessible areas (150 m buffer around tracks); (ii) is connected and compact (does not exceed a diameter of 920 m); (iii) restores the fragmentation level measured in 1976; and (iv) is at minimal cost (measured in surface units to restore).</p>
<p>First, we create a restopt problem with our input data:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">problem</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/restopt_problem.html">restopt_problem</a></span><span class="op">(</span>existing_habitat <span class="op">=</span> <span class="va">forest_2021</span>,
                           habitat_threshold <span class="op">=</span> <span class="fl">0.75</span>,
                           aggregation_factor <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<ol style="list-style-type: lower-roman">
<li>We add a constraint to this problem which specifies which planning units are available for restoration actions. The available areas are defined as a 150 m buffer around tracks, which is included in the package example dataset.</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">available</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>
  <span class="st">"extdata"</span>, <span class="st">"case_study"</span>, <span class="st">"available.gpkg"</span>, package <span class="op">=</span> <span class="st">"restoptr"</span>
<span class="op">)</span><span class="op">)</span>
<span class="va">problem</span> <span class="op">&lt;-</span> <span class="va">problem</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_available_areas_constraint.html">add_available_areas_constraint</a></span><span class="op">(</span><span class="va">available</span><span class="op">)</span></code></pre></div>
<ol start="2" style="list-style-type: lower-roman">
<li>We add a connected and a compactness constraint. The connected constraint ensures that the restoration plan is spatially continuous. The compactness constraint ensures that the restoration area is within an enclosing circle whose maximum diameter is 920 m (in our case), thus the maximum geographic distance between any two planning units in the solution cannot exceed 920 m.</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">problem</span> <span class="op">&lt;-</span> <span class="va">problem</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_connected_constraint.html">add_connected_constraint</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_compactness_constraint.html">add_compactness_constraint</a></span><span class="op">(</span>max_diameter <span class="op">=</span> <span class="fl">920</span>, unit <span class="op">=</span> <span class="st">"m"</span><span class="op">)</span></code></pre></div>
<ol start="3" style="list-style-type: lower-roman">
<li>We add a minimum mesh constraint to ensures that the restoration plan will restore, at least, the fragmentation level observed in 1976.</li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">problem</span> <span class="op">&lt;-</span> <span class="va">problem</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_min_mesh_constraint.html">add_min_mesh_constraint</a></span><span class="op">(</span>min_mesh <span class="op">=</span> <span class="va">mesh_1976</span>, unit <span class="op">=</span> <span class="st">"ha"</span><span class="op">)</span></code></pre></div>
<ol start="4" style="list-style-type: lower-roman">
<li>We set a min restore objective to identify the minimum cost restoration plans, with the cost measured as the area restored.</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">problem</span> <span class="op">&lt;-</span> <span class="va">problem</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/set_min_restore_objective.html">set_min_restore_objective</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>We can get a summary of the restopt problem by printing it.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">problem</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #00BB00; font-weight: bold;">-----------------------------------------------------------------</span> </span>
<span class="co">## <span style="color: #00BB00; font-weight: bold;">                         Restopt                         </span> </span>
<span class="co">## <span style="color: #00BB00; font-weight: bold;">-----------------------------------------------------------------</span> </span>
<span class="co">## <span style="color: #BBBBBB; font-weight: bold;">original habitat:    </span> <span style="color: #00BBBB;">forest_2021.tif</span> </span>
<span class="co">## <span style="color: #BBBBBB; font-weight: bold;">aggregation factor:  </span> <span style="color: #00BBBB;">3</span> </span>
<span class="co">## <span style="color: #BBBBBB; font-weight: bold;">habitat threshold:   </span> <span style="color: #00BBBB;">0.75</span> </span>
<span class="co">## <span style="color: #BBBBBB; font-weight: bold;">existing habitat:    </span> <span style="color: #00BBBB;">in memory</span> </span>
<span class="co">## <span style="color: #BBBBBB; font-weight: bold;">restorable habitat:  </span> <span style="color: #00BBBB;">in memory</span> </span>
<span class="co">## <span style="color: #00BB00;">-----------------------------------------------------------------</span> </span>
<span class="co">## <span style="color: #BBBBBB; font-weight: bold;">objective:           </span> <span style="color: #0000BB;">Minimize restoration area</span> </span>
<span class="co">## <span style="color: #00BB00;">-----------------------------------------------------------------</span> </span>
<span class="co">## <span style="color: #BBBBBB; font-weight: bold;">constraints:        </span>  </span>
<span class="co">## <span style="color: #0000BB;">  -  locked out (data = in memory)</span> </span>
<span class="co">## <span style="color: #0000BB;">  -  components (min_nb_components = 1, max_nb_components = 1)</span> </span>
<span class="co">## <span style="color: #0000BB;">  -  compactness (max_diameter = 920, unit = m)</span> </span>
<span class="co">## <span style="color: #0000BB;">  -  min MESH (min_mesh = 202.389186259541, precision = 4, unit = ha)</span> </span>
<span class="co">## <span style="color: #00BB00;">-----------------------------------------------------------------</span> </span>
<span class="co">## <span style="color: #BBBBBB; font-weight: bold;">settings:</span> </span>
<span class="co">## <span style="color: #BB00BB;">  - precision = 4</span></span>
<span class="co">## <span style="color: #BB00BB;">  - time_limit = 0</span></span>
<span class="co">## <span style="color: #BB00BB;">  - nb_solutions = 1</span></span>
<span class="co">## <span style="color: #BB00BB;">  - optimality_gap = 0</span> </span>
<span class="co">## <span style="color: #00BB00; font-weight: bold;">-----------------------------------------------------------------</span></span></code></pre>
<p>Finally we solve the problem, plot the solution, and print the solution’s metadata.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">solution</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">problem</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">solution</span><span class="op">)</span></code></pre></div>
<p><img src="case_study_files/figure-html/unnamed-chunk-12-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_metadata.html">get_metadata</a></span><span class="op">(</span><span class="va">solution</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     min_restore total_restorable nb_planning_units nb_components    diameter</span>
<span class="co">## 1 35.45694 [ha]    54.57428 [ha]                78             1 916.379 [m]</span>
<span class="co">##   optimality_proven search_state solving_time min_restore.1 min_restore_best</span>
<span class="co">## 1              TRUE   TERMINATED       34.689           434              434</span>
<span class="co">##            mesh</span>
<span class="co">## 1 202.5726 [ha]</span></code></pre>
<p>Looking at the characteristics of this restoration plan, we can notice that a strategic restoration plan can restore the fragmentation level of 1976 with a relatively small cost (~36 ha), compared to the forest cover loss that occurred between 1976 and 2021 (~165 ha).</p>
<p>Now, a typical question that may arise is whether alternative restoration plans of similar quality exist. It is possible to answer this question by configuring <strong>restoptr</strong> to output several solutions and setting an optimality gap. First, we reuse the problem to set an optimality gap of 10%, and ask for 1000 near-optimal solutions.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">problem</span> <span class="op">&lt;-</span> <span class="va">problem</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/add_settings.html">add_settings</a></span><span class="op">(</span>nb_solutions <span class="op">=</span> <span class="fl">1000</span>, optimality_gap <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>
<span class="va">solutions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">problem</span><span class="op">)</span></code></pre></div>
<p>Then, we compute the selection frequency of each planning unit, and plot it.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">solutions</span><span class="op">)</span>
<span class="va">selfreq</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/summarize-generics.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">s</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op">/</span> <span class="fl">1000</span>
<span class="va">selfreq</span><span class="op">[</span><span class="va">selfreq</span> <span class="op">==</span> <span class="fl">0</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">selfreq</span>, col<span class="op">=</span><span class="fu">paletteer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/paletteer/man/paletteer_c.html" class="external-link">paletteer_c</a></span><span class="op">(</span><span class="st">"ggthemes::Blue"</span>, <span class="fl">30</span><span class="op">)</span>,
     main <span class="op">=</span> <span class="st">"Selection frequency"</span><span class="op">)</span></code></pre></div>
<p><img src="case_study_files/figure-html/unnamed-chunk-14-1.png" width="700" style="display: block; margin: auto;"></p>
<p>What emerges from this analysis is that, under the current constraints, all near-optimal solutions occur in the same area, which indicates a strong potential of this particular area for curbing fragmentation at minimal cost in the Mount Kaala.</p>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references hanging-indent">
<div id="ref-r2">
<p>Jaeger, J.A. (2000). Landscape division, splitting index, and effective mesh size: New measures of landscape fragmentation. <em>Landscape Ecology</em>, <em>15</em>, 115–130.</p>
</div>
<div id="ref-r14">
<p>Vancutsem, C., Achard, F., Pekel, J.-F., Vieilledent, G., Carboni, S., Simonetti, D., Gallego, J., Aragão, L.E.O.C. &amp; Nasi, R. (2021). Long-term (1990) monitoring of forest cover changes in the humid tropics. <em>Science Advances</em>, <em>7</em>, eabe1603.</p>
</div>
</div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://dimitri-justeau.github.io/" class="external-link">Dimitri Justeau-Allaire</a>, <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="https://ecology.ghislainv.fr/" class="external-link">Ghislain Vieilledent</a>, <a href="https://www.lirmm.fr/~vismara/home.php" class="external-link">Philippe Vismara</a>, <a href="https://scholar.google.fr/citations?user=bJTn9u8AAAAJ&amp;hl=fr" class="external-link">Xavier Lorca</a>, <a href="https://scholar.google.com/citations?user=00W5veEAAAAJ&amp;hl=fr=" class="external-link">Philippe Birnbaum</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
