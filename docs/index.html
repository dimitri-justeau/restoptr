<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="
  Flexible framework for ecological restoration planning. It aims to identify priority areas for restoration efforts using optimization algorithms (based on Justeau-Allaire et al. 2021 &lt;doi:10.1111/1365-2664.13803&gt;). Priority areas can be identified by maximizing landscape indices, such as the effective mesh size (Jaeger 2000 &lt;doi:10.1023/A:1008129329289&gt;), or the integral index of connectivity (Pascual-Hortal &amp; Saura 2006 &lt;doi:10.1007/s10980-006-0013-z&gt;). Additionally, constraints can be used to ensure that priority areas exhibit particular characteristics (e.g., ensure that particular places are not selected for restoration, ensure that priority areas form a single contiguous network). Furthermore, multiple near-optimal solutions can be generated to explore multiple options in restoration planning. The package leverages the Choco-solver software to perform optimization using constraint programming (CP) techniques (&lt;https://choco-solver.org/&gt;).">
<title>Ecological Restoration Planning • restoptr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Ecological Restoration Planning">
<meta property="og:description" content="
  Flexible framework for ecological restoration planning. It aims to identify priority areas for restoration efforts using optimization algorithms (based on Justeau-Allaire et al. 2021 &lt;doi:10.1111/1365-2664.13803&gt;). Priority areas can be identified by maximizing landscape indices, such as the effective mesh size (Jaeger 2000 &lt;doi:10.1023/A:1008129329289&gt;), or the integral index of connectivity (Pascual-Hortal &amp; Saura 2006 &lt;doi:10.1007/s10980-006-0013-z&gt;). Additionally, constraints can be used to ensure that priority areas exhibit particular characteristics (e.g., ensure that particular places are not selected for restoration, ensure that priority areas form a single contiguous network). Furthermore, multiple near-optimal solutions can be generated to explore multiple options in restoration planning. The package leverages the Choco-solver software to perform optimization using constraint programming (CP) techniques (&lt;https://choco-solver.org/&gt;).">
<meta property="og:image" content="https://dimitri-justeau.github.io/restoptr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">restoptr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/restoptr.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dimitri-justeau/restoptr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="restopr-">restopr <a class="anchor" aria-label="anchor" href="#restopr-"></a>
</h1>
</div>
<div class="section level2">
<h2 id="ecological-restoration-planning">Ecological Restoration Planning<a class="anchor" aria-label="anchor" href="#ecological-restoration-planning"></a>
</h2>

<p id="logo-credit" style="text-align: right; font-size: 10px;">
Logo by Camille Salmon
</p>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>restoptr</code> R package provides a flexible framework for ecological restoration planning. It aims to identify priority areas for restoration efforts using optimization algorithms (based on Justeau-Allaire <em>et al.</em> 2021). Priority areas can be identified by maximizing landscape indices, such as the effective mesh size (Jaeger 2000), or the integral index of connectivity (Pascual-Hortal &amp; Saura 2006). Additionally, constraints can be used to ensure that priority areas exhibit particular characteristics (e.g., ensure that particular places are not selected for restoration, ensure that priority areas form a single contiguous network). Furthermore, multiple near-optimal solutions can be generated to explore multiple options in restoration planning. The package leverages the <a href="https://choco-solver.org/" class="external-link">Choco-solver</a> software to perform optimization using constraint programming (CP) techniques (Prud’homme <em>et al.</em> 2016).</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="package-installation">Package installation<a class="anchor" aria-label="anchor" href="#package-installation"></a>
</h3>
<p>The latest official version of the <em>restoptr R</em> package can be installed from the <a href="https://cran.r-project.org/" class="external-link">Comprehensive R Archive Network (CRAN)</a> using the following <em>R</em> code.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"restoptr"</span>, repos <span class="op">=</span> <span class="st">"https://cran.rstudio.com/"</span><span class="op">)</span></code></pre></div>
<p>Alternatively, the latest developmental version can be installed using the following <em>R</em> code. Please note that while developmental versions may contain additional features not present in the official version, they may also contain coding errors.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"dimitri-justeau/restoptr"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="system-dependencies">System dependencies<a class="anchor" aria-label="anchor" href="#system-dependencies"></a>
</h3>
<p>The packages requires a Java Runtime Environment (JRE), version 8 or higher. Below we provide platform-specific instructions to install it.</p>
<div class="section level4">
<h4 id="windows">
<em>Windows</em><a class="anchor" aria-label="anchor" href="#windows"></a>
</h4>
<p>Please install the latest Java Runtime Environment for Windows (see Oracle JDK, <a href="https://openjdk.org/install/" class="external-link">OpenJDK</a>, or <a href="https://www.graalvm.org/downloads/" class="external-link">GraalVM</a>). You also need to install <a href="https://maven.apache.org/" class="external-link">Maven</a>. After downloading the file, please run installer to install Java on your system. You will also need to ensure that the <code>PATH</code> environmental variable if configured so that <em>R</em> can access Java. <em>restoptr</em> relies on <em>rJava</em> for the communication between <em>R</em> and <em>Java</em>. If you have any trouble during the installation of <em>restopt</em> due to <em>rJava</em>, please refer to <em>rJava</em>’s documentation: <a href="https://rforge.net/rJava/index.html" class="external-link uri">https://rforge.net/rJava/index.html</a>.</p>
</div>
<div class="section level4">
<h4 id="ubuntu">
<em>Ubuntu</em><a class="anchor" aria-label="anchor" href="#ubuntu"></a>
</h4>
<p>For recent versions of Ubuntu (18.04 and later), the Java libraries are available through official repositories. They can be installed using the following system commands.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install default-jdk</span></code></pre></div>
<p>If you want to install a specific JRE version, please follow instructions from Oracle, <a href="https://openjdk.org/install/" class="external-link">OpenJDK</a>, or <a href="https://www.graalvm.org/downloads/" class="external-link">GraalVM</a>.</p>
</div>
<div class="section level4">
<h4 id="linux">
<em>Linux</em><a class="anchor" aria-label="anchor" href="#linux"></a>
</h4>
<p>Please follow instructions from Oracle, <a href="https://openjdk.org/install/" class="external-link">OpenJDK</a>, or <a href="https://www.graalvm.org/downloads/" class="external-link">GraalVM</a>.</p>
</div>
<div class="section level4">
<h4 id="macos">
<em>MacOS</em><a class="anchor" aria-label="anchor" href="#macos"></a>
</h4>
<p>The easiest way to install the Java libraries is using <a href="https://brew.sh/" class="external-link">HomeBrew</a>. After installing HomeBrew, the Java libraries can be installed using the following system commands.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install openjdk</span></code></pre></div>
<p>Please note that you might also need to ensure that the <code>PATH</code> environmental variable if configured so that <em>R</em> can access Java.</p>
</div>
</div>
<div class="section level3">
<h3 id="building-the-java-core-library-from-source-optional">Building the Java core library from source (optional)<a class="anchor" aria-label="anchor" href="#building-the-java-core-library-from-source-optional"></a>
</h3>
<p>The package relies on a core Java library called <a href="https://github.com/dimitri-justeau/restopt" class="external-link"><code>restopt</code></a>. This Java library handles the constrained optimization process via the <a href="https://choco-solver.org/" class="external-link">Choco-solver</a> software. Although this library is automatically included with the package, it can be manually compile from source if needed. <strong>Please note that this step is entirely optional, and is not needed to install the package.</strong> To compile the Java library, a the <a href="https://maven.apache.org/" class="external-link">Maven</a> software needs to be installed as well as a Java Development Kit (JDK) (version 8+) is required (e.g., see Oracle JDK, <a href="https://openjdk.org/install/" class="external-link">OpenJDK</a>, or <a href="https://www.graalvm.org/downloads/" class="external-link">GraalVM</a>). After installing these dependencies, the following procedures can be used to compile the Java library and it along with the package.</p>
<p>First clone the repository and update the source code.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/dimitri-justeau/restoptr.git</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> restoptr</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> submodule update <span class="at">--init</span> <span class="at">--recursive</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull <span class="at">--recurse-submodules</span></span></code></pre></div>
<p>Next, compile the core Java library with Maven.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> restopt</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> clean package <span class="at">-DskipTests</span></span></code></pre></div>
<p>Next, copy the resulting Java library (.jar) file into <code>java</code> directory.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> target/restopt-<span class="pp">*</span>.jar ../java/</span></code></pre></div>
<p>Finally, the package can be installed with the newly compiled Java library using the following <em>R</em> command.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_local.html" class="external-link">install_local</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Here we will provide a short tutorial on using the <em>restoptr R</em> package to identify priority areas for restoration. As part of this tutorial, we will use an example dataset that is distributed with the package (obtained from Justeau-Allaire <em>et al.</em> 2021). This example dataset contains data for prioritizing forest restoration efforts within a protected area in New Caledonia. We will begin the tutorial by loading the package. If you haven’t already, please install the package (see above for installation instructions).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load package</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dimitri-justeau.github.io/restoptr/">restoptr</a></span><span class="op">)</span></code></pre></div>
<p>To identify priorities for restoration, we require information on the location of places that do and do not currently contain suitable habitat. We will now import data to describe which places within the protected area contain forest habitat (imported as the <code>habitat_data</code> object). Specifically, this object is a spatial grid (i.e., raster layer). Each grid cell corresponds to a candidate place for restoration (termed planning unit), and their values indicate the absence or presence of forest within each planning unit (using values of zero and one, respectively).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># import data</span>
<span class="va">habitat_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"habitat_hi_res.tif"</span>, package <span class="op">=</span> <span class="st">"restoptr"</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># preview data</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">habitat_data</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## class       : SpatRaster </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">## dimensions  : 1867, 2713, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="do">## resolution  : 27.9487, 29.74339  (x, y)</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="do">## extent      : 419768.2, 495593.1, 227538.9, 283069.8  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="do">## coord. ref. : RGNC91-93 / Lambert New Caledonia (EPSG:3163) </span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="do">## source      : habitat_hi_res.tif </span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="do">## name        : habitat_hi_res</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># visualize data</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">habitat_data</span>, plg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"topright"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-habitat_data-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>Restoration efforts are often limited in terms of the places where they can be implemented. For example, restoration efforts may not be feasible in dense cities. In our example, some places are not feasible for restoration because they cannot be accessed by existing tracks within the protected area. We will now import data to describe which places are not feasible for restoration (imported as the <code>locked_out_data</code> object). This object – similar to the habitat data – is a spatial grid. The grid cell values in this object indicate which planning units should be considered available for restoration or not (using values of zero and one, respectively).</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># import data</span>
<span class="va">locked_out_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span>
  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"locked_out.tif"</span>, package <span class="op">=</span> <span class="st">"restoptr"</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># preview data</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">locked_out_data</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## class       : SpatRaster </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="do">## dimensions  : 1867, 2713, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="do">## resolution  : 27.9487, 29.74339  (x, y)</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="do">## extent      : 419768.2, 495593.1, 227538.9, 283069.8  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="do">## coord. ref. : RGNC91-93 / Lambert New Caledonia (EPSG:3163) </span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="do">## source      : locked_out.tif </span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="do">## name        : layer </span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="do">## min value   :     1 </span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="do">## max value   :     1</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># visualize data</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">locked_out_data</span>, plg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"topright"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-locked_out_data-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>We now will build a restoration optimization problem (stored in the <code>problem</code> object). This object will specify all the data, settings, and optimization criteria for identifying priority areas. Specifically, we will initialize the problem with the <code>habitat_data</code> object to specify which planning units already contain suitable habitat (with the <code><a href="reference/restopt_problem.html">restopt_problem()</a></code> function). To reduce run time, we will also initialize it with parameters to aggregate the spatial data (i.e., <code>aggregation_factor</code> and <code>habitat_threshold</code>). Next, we will specify that the objective function for the optimization process is to maximize connectivity based on the effective mesh size metric (with the <code><a href="reference/set_max_mesh_objective.html">set_max_mesh_objective()</a></code> function). We will then specify constraints to ensure that the priority areas exhibit particular characteristics. These constraints will be used to ensure that (i) certain planning units are not selected for restoration (with the <code><a href="reference/add_locked_out_constraint.html">add_locked_out_constraint()</a></code> function), (ii) the total amount of restored area should range between 90 and 220 ha (with the <code><a href="reference/add_restorable_constraint.html">add_restorable_constraint()</a></code> function), and (iii) limit the spatial extent of the priority areas to be within 2.4 km (with the <code><a href="reference/add_compactness_constraint.html">add_compactness_constraint()</a></code> function).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># build restoration optimization problem</span>
<span class="va">problem</span> <span class="op">&lt;-</span>
  <span class="co">## initialize problem with habitat data</span>
  <span class="fu"><a href="reference/restopt_problem.html">restopt_problem</a></span><span class="op">(</span>
    existing_habitat <span class="op">=</span> <span class="va">habitat_data</span>,
    aggregation_factor <span class="op">=</span> <span class="fl">16</span>,
    habitat_threshold <span class="op">=</span> <span class="fl">0.7</span>
  <span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="co">## set objective function is to maximize effective mesh size</span>
  <span class="fu"><a href="reference/set_max_mesh_objective.html">set_max_mesh_objective</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="co">## add constraint to ensure that certain places are not selected</span>
  <span class="fu"><a href="reference/add_locked_out_constraint.html">add_locked_out_constraint</a></span><span class="op">(</span><span class="va">locked_out_data</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="co">## add constraint to limit total amount of restored area</span>
  <span class="fu"><a href="reference/add_restorable_constraint.html">add_restorable_constraint</a></span><span class="op">(</span><span class="fl">90</span>, <span class="fl">220</span>, unit <span class="op">=</span> <span class="st">"ha"</span><span class="op">)</span> <span class="op"><a href="reference/pipe.html">%&gt;%</a></span>
  <span class="co">## add constraint to limit spatial extent of priority areas</span>
  <span class="fu"><a href="reference/add_compactness_constraint.html">add_compactness_constraint</a></span><span class="op">(</span><span class="fl">2.4</span>, unit <span class="op">=</span> <span class="st">"km"</span><span class="op">)</span>

<span class="co"># preview problem</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">problem</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ----------------------------------------------------------------- </span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="do">##                          Restopt                          </span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="do">## ----------------------------------------------------------------- </span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="do">## original habitat:     habitat_hi_res.tif </span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="do">## aggregation factor:   16 </span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="do">## habitat threshold:    0.7 </span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="do">## existing habitat:     in memory </span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="do">## restorable habitat:   in memory </span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="do">## ----------------------------------------------------------------- </span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="do">## objective:            Maximize effective mesh size </span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="do">## ----------------------------------------------------------------- </span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="do">## constraints:          </span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   -  locked out (data = in memory) </span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="do">##   -  restorable (min_restore = 90, max_restore = 220, min_proportion = 1, unit = ha) </span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="do">##   -  compactness (max_diameter = 2.4, unit = km) </span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="do">## ----------------------------------------------------------------- </span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="do">## settings: </span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="do">##   - precision = 4</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="do">##   - time_limit = 0</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="do">##   - nb_solutions = 1</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="do">##   - optimality_gap = 0 </span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------------------------------------------------------</span></span></code></pre></div>
<p>After building the problem, we can solve it to identify priority areas for restoration (with the <code><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve()</a></code> function). The solution is a raster layer containing values that indicate if planning units: (<code>0</code>) were locked out, (<code>1</code>) do not contain existing habitat, (<code>2</code>) contain existing habitat, or (<code>3</code>) selected as a priority area for restoration.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># solve problem to identify priority areas</span>
<span class="va">solution</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/solve.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">problem</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Good news: the solver found 1 solution statisfying the constraints that was proven optimal ! (solving time = 1.18 s)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># preview solution</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">solution</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">## class       : RestoptSolution </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="do">## dimensions  : 117, 170, 1  (nrow, ncol, nlyr)</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="do">## resolution  : 447.1792, 475.8943  (x, y)</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="do">## extent      : 419768.2, 495788.7, 227390.1, 283069.8  (xmin, xmax, ymin, ymax)</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="do">## coord. ref. : RGNC91-93 / Lambert New Caledonia (EPSG:3163) </span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="do">## source      : memory </span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="do">## name        :  Solution 1 </span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="do">## min value   :  Locked out </span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="do">## max value   : Restoration</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># visualize solution</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span>
  <span class="va">solution</span>,
  main <span class="op">=</span> <span class="st">"Solution"</span>,
  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#E5E5E5"</span>, <span class="st">"#fff1d6"</span>, <span class="st">"#b2df8a"</span>, <span class="st">"#1f78b4"</span><span class="op">)</span>,
  plg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"topright"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-solution-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>Finally, we can access additional information on the solution (with the <code><a href="reference/get_metadata.html">get_metadata()</a></code> function).</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># access information on the solution</span>
<span class="co">## N.B. spatial units are expressed as hectares</span>
<span class="fu"><a href="reference/get_metadata.html">get_metadata</a></span><span class="op">(</span><span class="va">solution</span>, area_unit <span class="op">=</span> <span class="st">"ha"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">##     min_restore total_restorable nb_planning_units nb_components     diameter</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 219.3772 [ha]    219.3772 [ha]                15             3 2280.175 [m]</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   optimality_proven search_state solving_time  mesh_initial          mesh</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="do">## 1              TRUE   TERMINATED        1.156 13667.84 [ha] 14232.66 [ha]</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="do">##       mesh_best</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 14232.66 [ha]</span></span></code></pre></div>
<p>This has just been a short taster of the package. For an extended tutorial on using the package, please refer to the vignette.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>Please cite the <em>restoptr R</em> package when using it in publications. Although a new publication describing the package is in preparation; in the meantime, please use the following citation which outlines the methodology.</p>
<blockquote>
<p>Justeau-Allaire, D., Vieilledent, G., Rinck, N., Vismara, P., Lorca, X., &amp; Birnbaum, P. (2021). Constrained optimization of landscape indices in conservation planning to support ecological restoration in New Caledonia. Journal of Applied Ecology, 58(4), 744‑754.</p>
</blockquote>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<p>If you have any questions about using the package, suggestions for improvements, or if you detect a bug, please <a href="https://github.com/dimitri-justeau/restoptr/issues/new/choose" class="external-link">open an issue in online code repository</a>. We designed the package to make it relatively easy to add new functionality, and would be delighted to hear from you.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Jaeger, J. A. G. (2000). Landscape division, splitting index, and effective mesh size: New measures of landscape fragmentation. <em>Landscape Ecology</em>, 15(2), 115-‑130.</p>
<p>Justeau-Allaire, D., Vieilledent, G., Rinck, N., Vismara, P., Lorca, X., &amp; Birnbaum, P. (2021). Constrained optimization of landscape indices in conservation planning to support ecological restoration in New Caledonia. <em>Journal of Applied Ecology</em>, 58(4), 744‑-754.</p>
<p>Pascual-Hortal, L., &amp; Saura, S. (2006). Comparison and development of new graph-based landscape connectivity indices: Towards the priorization of habitat patches and corridors for conservation. <em>Landscape Ecology</em>, 21(7), 959-‑967.</p>
<p>Prud’homme, C., Fages, J.-G., &amp; Lorca, X. (2016). Choco Solver Documentation. {TASC, INRIA Rennes, LINA CNRS UMR 6241, COSLING S.A.S. Available at <a href="https://choco-solver.org/" class="external-link uri">https://choco-solver.org/</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=restoptr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/dimitri-justeau/restoptr/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/dimitri-justeau/restoptr/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing restoptr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://dimitri-justeau.github.io/" class="external-link">Dimitri Justeau-Allaire</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-4129-0764" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4716-6134" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://ecology.ghislainv.fr/" class="external-link">Ghislain Vieilledent</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-1685-4997" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://www.lirmm.fr/~vismara/home.php" class="external-link">Philippe Vismara</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://scholar.google.fr/citations?user=bJTn9u8AAAAJ&amp;hl=fr" class="external-link">Xavier Lorca</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://scholar.google.com/citations?user=00W5veEAAAAJ&amp;hl=fr=" class="external-link">Philippe Birnbaum</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link"><img src="https://img.shields.io/badge/Lifecycle-stable-brightgreen.svg" alt="lifecycle"></a></li>
<li><a href="https://github.com/dimitri-justeau/restoptr/actions" class="external-link"><img src="https://img.shields.io/github/workflow/status/dimitri-justeau/restoptr/Ubuntu/master.svg?label=Ubuntu" alt="R-CMD-check-Ubuntu"></a></li>
<li><a href="https://github.com/dimitri-justeau/restoptr/actions" class="external-link"><img src="https://img.shields.io/github/workflow/status/dimitri-justeau/restoptr/Windows/master.svg?label=Windows" alt="R-CMD-check-Windows"></a></li>
<li><a href="https://github.com/dimitri-justeau/restoptr/actions" class="external-link"><img src="https://img.shields.io/github/workflow/status/dimitri-justeau/restoptr/macOS/master.svg?label=macOS" alt="R-CMD-check-MacOS"></a></li>
<li><a href="https://app.codecov.io/gh/dimitri-justeau/restoptr" class="external-link"><img src="https://codecov.io/github/dimitri-justeau/restoptr/coverage.svg?branch=master" alt="Coverage Status"></a></li>
<li><a href="https://github.com/dimitri-justeau/restoptr" class="external-link"><img src="http://www.r-pkg.org/badges/version/restoptr" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://dimitri-justeau.github.io/" class="external-link">Dimitri Justeau-Allaire</a>, <a href="https://jeffrey-hanson.com" class="external-link">Jeffrey O Hanson</a>, <a href="https://ecology.ghislainv.fr/" class="external-link">Ghislain Vieilledent</a>, <a href="https://www.lirmm.fr/~vismara/home.php" class="external-link">Philippe Vismara</a>, <a href="https://scholar.google.fr/citations?user=bJTn9u8AAAAJ&amp;hl=fr" class="external-link">Xavier Lorca</a>, <a href="https://scholar.google.com/citations?user=00W5veEAAAAJ&amp;hl=fr=" class="external-link">Philippe Birnbaum</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
